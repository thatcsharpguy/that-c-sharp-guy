---
layout: post-en
title:  "From console to mobile"
date:   2015-07-20 18:31:38
author: Antonio Feregrino Bola√±os
categories: xamarin
excerpt: But what happens when we face real people/world problems? for sure, there are still console apps out in the wild, but nowadays all the successful applications have a mobile version, why yours shouldn't have one.
lang: en
---
At school I was often asked to write small console apps to practice programming concepts, and some teachers even wanted a fully functional project in such way.  
<br />
But what happens when we face real people/world problems? for sure, there are still console apps out in the wild, but nowadays all the successful applications have a mobile version, why yours shouldn't have one.

In this post I'll try to show you how to go from console to mobile (using Xamarin.Forms) with a simple example, it's a bit long but I'll make it worth the reading.

<h3>Console</h3>
I'd like to start by introducing the app that we'll transform to mobile, this app takes two strings and returns a number indicating the "distance" between them using the <a href="http://www.dotnetperls.com/levenshtein" target="_blank">Levenshtein distance algorithm</a>, for example:
<table>
	<thead>
		<tr>
			<td>str1</td>
			<td>str2</td>
			<td>Distance</td>	
		</tr>
	</thead>
	<tr>
		<td>ant</td>
		<td>aunt</td>
		<td>1</td>
	</tr>
	<tr>
		<td>Samantha</td>
		<td>Sam</td>
		<td>5</td>
	</tr>
	<tr>
		<td>Xamarin</td>
		<td>Samaryn</td>
		<td>2</td>
	</tr>
</table>
I'll use the implementation from Dot Net Perls, which is a nice static method that we can easily call in our program. Now, in a console app we ask the user for input with <code>Console.ReadLine()</code> in this case we'd use something like this: 
{% highlight csharp	%}
static void Main()
{
	Console.WriteLine("First string:");
	string str1 = Console.ReadLine();
	Console.WriteLine("Second string:");
	string str2 = Console.ReadLine();
	int distance = Compute(str1, str2);
	Console.WriteLine("Distance: " + distance);
}
{% endhighlight %}
<img src='{{ "sample-c-app.gif" | prepend: page.url | prepend: site.images_url }}' />

<h3>Some differences</h3>
<h4>Entry point</h4>
As we have seen before, our program has an entry point (the <code>Main</code> method) whereas for mobile every platform has its own entry point, not necesarily a Main method. Other important thing is that  for a console app we tend to write most of the application logic inside the entry method, while the entry method for a mobile application runs code that usually isn't user provided code.
<h4>Controls</h4>
A thing that our users are looking for is having a nice UI to interact with the app, in the console user must interact secuentially, in our example a user that has entered the first string cannot go back to modify it. Or think about what happens if for some reason the user wants to type the second string before the first one? In a mobile app we can solve this problem by using controls, with them we can forget about Console writing or reading.
<br />
A control is one of the many ways to receive user interaction or to provide feedback to the user about what is happening. In our example we will replace both <code>Console.ReadLine</code> for a pair of <code>Entry</code> controls and the <code>Console.WriteLine</code>s for <code>Label</code>s. The controls are available for user interaction at any time.
<h4>Event oriented programming</h4>
There are few user interactions that we can handle when programming a console applications, the user can only enter text, use the keyboard arrows or press the enter key. On the other hand if we use controls in our mobile app a whole lot of user interactions can be made. When a user interacts with a control an event is fired, we as programmers provide code to handle such events. We call that "event oriented programming" since the behaviour of our app is driven by the events we choose to handle.
<h3>Xamarin.Forms</h3>
So, what is Xamarin.Forms? in a few words it is a tool provided by the Xamarin Platforms that allows us to share even more code when writing an app. Xamarin.Forms (I'll be calling it just "Forms" from now on) provides a set of common controls to write our application interface once and have it work on the three major mobile platforms. The controls we create using Forms are rendered to platform specific controls in order to take advantage of each operating system capabilities. For example: if we develop using the traditional approach we must work on the UI three times (each for every operating system).  
<br />
<br />
As I mentioned before, the Levenshtein app will have two text input boxes, three labels and one button. If we had choosen the traditional approach we'll had to write six text input boxes (two for each platform), three buttons (again, one for each platform). Look at the table below to see what the controls we'll be using render to:
<table>
	<thead>
		<tr>
			<td>Forms</td>
			<td>Android</td>
			<td>iOS</td>	
			<td>Windows Phone</td>	
		</tr>
	</thead>
	<tr>
		<td>Button</td>
		<td>Button (View)</td>
		<td>UIButton (UIControl)</td>	
		<td>Button (Control)</td>	
	</tr>
	<tr>
		<td>Label</td>
		<td>TextView (View)</td>
		<td>UILabel (UIControl)</td>	
		<td>TextBlock (Control)</td>	
	</tr>
	<tr>
		<td>Entry</td>
		<td>EditText (View)</td>
		<td>UITextField (UIControl)</td>	
		<td>TextBox (Control)</td>	
	</tr>
</table>
<h3>Hands on code</h3>
Since I want to show all three platforms I'll be using Visual Studio 2013 to create the project but this could be easily replicated using Xamarin Studio if you only want to deploy to certain platform.
<h4>Creating the project</h4>
To create the project we'll use the Mobile Apps template that comes with Xamarin Platform installation. To do this once Visual is open go to <code>File &gt; New &gt; Project</code> and select Mobile Apps and then Blank App (the one that says "portable"). Assign your project a name and let VS do its magic. It shouldn't take long, after it finishes we'll end up with a structure like the one below.
<img alt="Project structure" title="Project structure" src='{{ "project-structure.png" | prepend: page.url | prepend: site.images_url }}' />
You can see that there are 4 projects, three of them ending with a suffix indicating the platform they are specific to. The other one is a portable class library (from now on "PCL") which will contain most of our code. You also must notice that the name of the PCL is highlighted with a bold font, it means that the PCL is set as the <strong>startup project</strong>.
<h4>Running the startup project</h4>
The startup project is the project that will get executed once we click the "Play" button o the upper part of our IDE, we can change the startup project by right-clicking on the project we want to set and choosing the corresponding option.
<br />
<br />
Depending on what kind of project have we selected as startup, a different set of options will be available to run our project, let's keep it simple and set the Windows Phone project as the startup one. Set the emulator as the target device and hit Play to build and run the app.
<img alt="Startup project" title="Startup project" src='{{ "project-target-selection.png" | prepend: page.url | prepend: site.images_url }}' />
<h4>What's inside a Xamarin.Forms app</h4>
Let's go back to the PCL project, in it we'll find a file named <code>App.cs</code> it contains the <code>App</code> class which we can see as the "entry point" for our Forms app.
<h4>Adding controls</h4>


