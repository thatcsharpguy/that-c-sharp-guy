---
layout: post
title: Conectando un Bubble Display a un Netduino Plus 2
date:   2015-07-12 18:31:38
author: Antonio Feregrino Bolaños
categories: blog es

excerpt: He decididio "matar" el blog anterior, si por casualidad llegan a blog.fferegrino.org, encontrarán que ya no es lo que era antes. He decidido dividir el contenido y si llegaron acá buscando cosas técnicas este es el lugar indicado.
lang: es
---
<!--
<div class="warning">
   <h3>Advertencia</h3>
   Es importante destacar que soy un desarrollador de software que sabe casi nada de electrónica, así que seguir este tutorial es bajo tu propio riesgo, lo que aquí se muestra es producto de búsquedas en internet y lo poco que me he quedado de la carrera.	
</div>
-->
<h3>Material</h3>
<ul>
   <li>1 Protoboard</li>
   <li>1 Netduino Plus 2</li>
   <li>7 resistencias de 330 ohms</li>
   <li>4 resistencias de 1K ohms</li>
   <li>4 transistores BC557</li>
   <li>1 Bubble Display</li>
   <li>Cable</li>
</ul>
<img src="/postimages{{ page.url }}material.jpg" />
<h3>Cableado</h3>
Lo primero, es cablear el display, lo haremos de la siguiente manera y basándonos en la tabla, tenemos que buscar debajo del display el pin con una marca blanca, la cual es la número 1 en el siguiente daigrama <strong>(no olvides colocar una resistencia de 330 en serie entre la conexión al Netduino y la del display)</strong>, también hay que cablear los transistores, estos al pin número 3, que se muestra en los diagramas.
<div class="pure-g">
   <div class="pure-u-12-24">
      <img src="/postimages{{ page.url }}7segdgm.png" />
   </div>
   <div class="pure-u-12-24">
      <img src="/postimages{{ page.url }}transistor.jpg" />
   </div>
</div>
<table>
   <thead>
      <tr>
         <td>Pin display</td>
         <td>Pin conexión</td>
         <td>Función</td>
      </tr>
   </thead>
   <tr>
      <td>1</td>
      <td>Pin 3 de un transistor</td>
      <td>Cátodo display 1</td>
   </tr>
   <tr>
      <td>2</td>
      <td>Digital 4</td>
      <td>Ánodo e</td>
   </tr>
   <tr>
      <td>3</td>
      <td>Digital 2</td>
      <td>Ánodo c</td>
   </tr>
   <tr>
      <td>4</td>
      <td>Pin 3 de un transistor</td>
      <td>Cátodo display 3</td>
   </tr>
   <tr>
      <td>5</td>
      <td>Digital 7 (No se usa)</td>
      <td>Ánodo punto</td>
   </tr>
   <tr>
      <td>6</td>
      <td>Pin 3 de un transistor</td>
      <td>Cátodo display 4</td>
   </tr>
   <tr>
      <td>7</td>
      <td>Digital 6</td>
      <td>Ánodo g</td>
   </tr>
   <tr>
      <td>8</td>
      <td>Digital 2</td>
      <td>Ánodo d</td>
   </tr>
   <tr>
      <td>9</td>
      <td>Digital 5</td>
      <td>Ánodo f</td>
   </tr>
   <tr>
      <td>10</td>
      <td>Pin 3 de un transistor</td>
      <td>Cátodo display 2</td>
   </tr>
   <tr>
      <td>11</td>
      <td>Digital 1</td>
      <td>Ánodo b</td>
   </tr>
   <tr>
      <td>12</td>
      <td>Digital 1</td>
      <td>Ánodo a</td>
   </tr>
</table>
Para terminar de cablear el circuito debemos conectar el pin 1 de los cuatro transistores a tierra y los pines 2 a salidas digitales de nuestra tarjeta <strong>(nuevamente, coloca en serie las resistencias de 1K)</strong>.
<table>
      <thead>
            <tr>
                  <td>Transistor (pin 2)</td>
                  <td>Pin Netduino</td>
            </tr>
      </thead>
      <tr>
            <td>1</td>
            <td>Digital 8</td>
      </tr>
      <tr>
            <td>2</td>
            <td>Digital 9</td>
      </tr>
      <tr>
            <td>3</td>
            <td>Digital 10</td>
      </tr>
      <tr>
            <td>4</td>
            <td>Digital 11</td>
      </tr>
</table>
<img src="/postimages{{ page.url }}final-wiring.jpg" />
<h2>Código</h2>
Para el código, cree una clase llamada, que envuelve la lógica para encender los segmentos individuales así como para indicar cuál debe estar encendido en qué momento, la clase es la siguiente

{% highlight csharp %}
public Bubble7(Cpu.Pin a, Cpu.Pin b, Cpu.Pin c, 
      Cpu.Pin d, Cpu.Pin e, Cpu.Pin f, 
      Cpu.Pin g, Cpu.Pin d1, Cpu.Pin d2, 
      Cpu.Pin d3, Cpu.Pin d4)
{
  A = new OutputPort(a, false);
  B = new OutputPort(b, false);
  // ... más asignaciones
  D3 = new OutputPort(d3, false);
  D4 = new OutputPort(d4, false);
}
{% endhighlight %}